CREATE PROCEDURE SpActualizabRegistroPorteria @empresa int,@fechaEntrada datetime,@fechaSalida datetime,@fechaProgramacion datetime,@fechaRegistro datetime,@propio bit,@numero varchar(50),@tipo varchar(50),@remision varchar(50),@codigoConductor varchar(50),@nombreConductor varchar(250),@vehiculo varchar(50),@remolque varchar(50),@usuario varchar(50),@estado char(2),@Retorno int output  AS begin tran bRegistroPorteria update bRegistroPorteria set fechaEntrada = @fechaEntrada,fechaSalida = @fechaSalida,fechaProgramacion = @fechaProgramacion,fechaRegistro = @fechaRegistro,propio = @propio,remision = @remision,codigoConductor = @codigoConductor,nombreConductor = @nombreConductor,vehiculo = @vehiculo,remolque = @remolque,usuario = @usuario,estado = @estado where empresa = @empresa and numero = @numero and tipo = @tipo if (@@error = 0 ) begin set @Retorno = 0 commit tran bRegistroPorteria end else begin set @Retorno = 1 rollback tran bRegistroPorteria end