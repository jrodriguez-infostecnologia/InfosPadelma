CREATE PROCEDURE SpInsertalRegistroAnalisisTanque @empresa int,@porcentaje int,@tipo varchar(50),@numero varchar(50),@tanque varchar(50),@Retorno int output  AS begin tran lRegistroAnalisisTanque insert lRegistroAnalisisTanque( empresa,porcentaje,tipo,numero,tanque ) select @empresa,@porcentaje,@tipo,@numero,@tanque if (@@error = 0 ) begin set @Retorno = 0 commit tran lRegistroAnalisisTanque end else begin set @Retorno = 1 rollback tran lRegistroAnalisisTanque end