CREATE PROCEDURE SpInsertaaLotesDetalle @empresa int,@linea int,@noPalma int,@izquierda bit,@lote varchar(50),@Retorno int output  AS begin tran aLotesDetalle insert aLotesDetalle( empresa,linea,noPalma,izquierda,lote ) select @empresa,@linea,@noPalma,@izquierda,@lote if (@@error = 0 ) begin set @Retorno = 0 commit tran aLotesDetalle end else begin set @Retorno = 1 rollback tran aLotesDetalle end