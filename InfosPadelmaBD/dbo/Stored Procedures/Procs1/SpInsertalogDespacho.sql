CREATE PROCEDURE SpInsertalogDespacho @empresa int,@fecha datetime,@cantidad float,@tipo varchar(50),@numero varchar(50),@tiquete varchar(50),@remision varchar(50),@remisionComercializadora varchar(50),@vehiculo varchar(50),@remolque varchar(50),@producto varchar(50),@programacion varchar(50),@cliente varchar(50),@lugarEntrega varchar(50),@comercializadora varchar(50),@planta varchar(50),@año char(6),@mes nchar,@Retorno int output  AS begin tran logDespacho insert logDespacho( empresa,fecha,cantidad,tipo,numero,tiquete,remision,remisionComercializadora,vehiculo,remolque,producto,programacion,cliente,lugarEntrega,comercializadora,planta,año,mes ) select @empresa,@fecha,@cantidad,@tipo,@numero,@tiquete,@remision,@remisionComercializadora,@vehiculo,@remolque,@producto,@programacion,@cliente,@lugarEntrega,@comercializadora,@planta,@año,@mes if (@@error = 0 ) begin set @Retorno = 0 commit tran logDespacho end else begin set @Retorno = 1 rollback tran logDespacho end