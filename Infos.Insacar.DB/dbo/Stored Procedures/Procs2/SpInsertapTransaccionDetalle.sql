CREATE PROCEDURE SpInsertapTransaccionDetalle @empresa int,@registro int,@año int,@mes int,@movimiento int,@valor float,@tipo varchar(50),@numero varchar(50),@Retorno int output  AS begin tran pTransaccionDetalle insert pTransaccionDetalle( empresa,registro,año,mes,movimiento,valor,tipo,numero ) select @empresa,@registro,@año,@mes,@movimiento,@valor,@tipo,@numero if (@@error = 0 ) begin set @Retorno = 0 commit tran pTransaccionDetalle end else begin set @Retorno = 1 rollback tran pTransaccionDetalle end