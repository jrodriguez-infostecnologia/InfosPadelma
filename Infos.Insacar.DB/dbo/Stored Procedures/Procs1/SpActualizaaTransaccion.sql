CREATE PROCEDURE SpActualizaaTransaccion @fecha date,@fechaFinal date,@empresa int,@año int,@mes int,@jornal int,@racimos int,@cantidad int,@precio money,@valorTotal money,@fechaRegistro datetime,@fechaAnulado datetime,@anulado bit,@tipo varchar(50),@numero varchar(50),@referencia varchar(50),@remision varchar(50),@observacion varchar(2550),@usuarioRegistro varchar(50),@usuarioAnulado varchar(50),@finca char(10),@Retorno int output  AS begin tran aTransaccion update aTransaccion set fecha = @fecha,fechaFinal = @fechaFinal,año = @año,mes = @mes,jornal = @jornal,racimos = @racimos,cantidad = @cantidad,precio = @precio,valorTotal = @valorTotal,fechaRegistro = @fechaRegistro,fechaAnulado = @fechaAnulado,anulado = @anulado,referencia = @referencia,remision = @remision,observacion = @observacion,usuarioRegistro = @usuarioRegistro,usuarioAnulado = @usuarioAnulado,finca = @finca where empresa = @empresa and numero = @numero and tipo = @tipo if (@@error = 0 ) begin set @Retorno = 0 commit tran aTransaccion end else begin set @Retorno = 1 rollback tran aTransaccion end