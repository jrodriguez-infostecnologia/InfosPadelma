CREATE PROCEDURE SpActualizabProcedencia @empresa int,@proveedor int,@agrupadoPor int,@fechaRegistro datetime,@activo bit,@codigo varchar(50),@usuario varchar(50),@Retorno int output  AS begin tran bProcedencia update bProcedencia set proveedor = @proveedor,agrupadoPor = @agrupadoPor,fechaRegistro = @fechaRegistro,activo = @activo,usuario = @usuario where codigo = @codigo and empresa = @empresa if (@@error = 0 ) begin set @Retorno = 0 commit tran bProcedencia end else begin set @Retorno = 1 rollback tran bProcedencia end