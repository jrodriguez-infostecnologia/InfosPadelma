create PROCEDURE [dbo].[SpActualizanVacaciones] @periodoInicial date,@periodoFinal date,@fechaSalida date,@fechaRetorno date,@empresa int,@empleado int,@registro int,@diasCausados int,@diasTomados int,@diasPendientes int,@diasPagados int,@año int,@mes int,@periodo int,@fechaRegistro datetime,@fechaAnulado datetime,@anulado bit,@ejecutado bit,@pagaNomina bit,@acumulada bit,@liquidada bit,@valorPagado decimal,@valorBase decimal,@tipo varchar(10),@usuario varchar(50),@observaciones varchar(500),@usuarioAnulado varchar(50),@Retorno int output  AS begin tran nVacaciones update nVacaciones set fechaSalida = @fechaSalida,fechaRetorno = @fechaRetorno,diasCausados = @diasCausados,diasTomados = @diasTomados,diasPendientes = @diasPendientes,diasPagados = @diasPagados,año = @año,mes = @mes,periodo = @periodo,fechaRegistro = @fechaRegistro,fechaAnulado = @fechaAnulado,anulado = @anulado,ejecutado = @ejecutado,pagaNomina = @pagaNomina,acumulada = @acumulada,liquidada = @liquidada,valorPagado = @valorPagado,valorBase = @valorBase,tipo = @tipo,usuario = @usuario,observaciones = @observaciones,usuarioAnulado = @usuarioAnulado where empleado = @empleado and empresa = @empresa and periodoFinal = @periodoFinal and periodoInicial = @periodoInicial and registro = @registro if (@@error = 0 ) begin set @Retorno = 0 commit tran nVacaciones end else begin set @Retorno = 1 rollback tran nVacaciones end