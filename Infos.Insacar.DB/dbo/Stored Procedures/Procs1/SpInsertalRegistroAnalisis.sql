CREATE PROCEDURE SpInsertalRegistroAnalisis @empresa int,@fecha datetime,@valor float,@tipo varchar(50),@numero varchar(50),@analisis varchar(10),@usuario varchar(50),@Retorno int output  AS begin tran lRegistroAnalisis insert lRegistroAnalisis( empresa,fecha,valor,tipo,numero,analisis,usuario ) select @empresa,@fecha,@valor,@tipo,@numero,@analisis,@usuario if (@@error = 0 ) begin set @Retorno = 0 commit tran lRegistroAnalisis end else begin set @Retorno = 1 rollback tran lRegistroAnalisis end