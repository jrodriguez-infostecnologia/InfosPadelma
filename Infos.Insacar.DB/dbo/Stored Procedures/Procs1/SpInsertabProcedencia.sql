CREATE PROCEDURE SpInsertabProcedencia @empresa int,@proveedor int,@agrupadoPor int,@fechaRegistro datetime,@activo bit,@codigo varchar(50),@usuario varchar(50),@Retorno int output  AS begin tran bProcedencia insert bProcedencia( empresa,proveedor,agrupadoPor,fechaRegistro,activo,codigo,usuario ) select @empresa,@proveedor,@agrupadoPor,@fechaRegistro,@activo,@codigo,@usuario if (@@error = 0 ) begin set @Retorno = 0 commit tran bProcedencia end else begin set @Retorno = 1 rollback tran bProcedencia end