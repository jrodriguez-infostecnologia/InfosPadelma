CREATE PROCEDURE SpActualizaaLotesCanal @empresa int,@registro int,@metros decimal,@lote varchar(50),@tipoCanal varchar(10),@Retorno int output  AS begin tran aLotesCanal update aLotesCanal set metros = @metros where empresa = @empresa and lote = @lote and registro = @registro and tipoCanal = @tipoCanal if (@@error = 0 ) begin set @Retorno = 0 commit tran aLotesCanal end else begin set @Retorno = 1 rollback tran aLotesCanal end