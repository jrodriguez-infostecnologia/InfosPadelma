CREATE PROCEDURE SpActualizalogDespacho @empresa int,@fecha datetime,@cantidad float,@tipo varchar(50),@numero varchar(50),@tiquete varchar(50),@remision varchar(50),@remisionComercializadora varchar(50),@vehiculo varchar(50),@remolque varchar(50),@producto varchar(50),@programacion varchar(50),@cliente varchar(50),@lugarEntrega varchar(50),@comercializadora varchar(50),@planta varchar(50),@año char(6),@mes nchar,@Retorno int output  AS begin tran logDespacho update logDespacho set fecha = @fecha,cantidad = @cantidad,tiquete = @tiquete,remision = @remision,remisionComercializadora = @remisionComercializadora,vehiculo = @vehiculo,remolque = @remolque,producto = @producto,programacion = @programacion,cliente = @cliente,lugarEntrega = @lugarEntrega,comercializadora = @comercializadora,planta = @planta,año = @año,mes = @mes where empresa = @empresa and numero = @numero and tipo = @tipo if (@@error = 0 ) begin set @Retorno = 0 commit tran logDespacho end else begin set @Retorno = 1 rollback tran logDespacho end