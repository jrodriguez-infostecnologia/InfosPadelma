CREATE PROCEDURE SpActualizaaTransaccionNovedad @fecha date,@empresa int,@año int,@mes int,@registro int,@racimos int,@pesoRacimo float,@ejecutado bit,@cantidad decimal,@jornales decimal,@saldo decimal,@tipo varchar(50),@numero varchar(50),@novedad varchar(50),@uMedida varchar(50),@seccion varchar(50),@lote varchar(50),@Retorno int output  AS begin tran aTransaccionNovedad update aTransaccionNovedad set fecha = @fecha,año = @año,mes = @mes,racimos = @racimos,pesoRacimo = @pesoRacimo,ejecutado = @ejecutado,cantidad = @cantidad,jornales = @jornales,saldo = @saldo,uMedida = @uMedida,seccion = @seccion,lote = @lote where empresa = @empresa and novedad = @novedad and numero = @numero and registro = @registro and tipo = @tipo if (@@error = 0 ) begin set @Retorno = 0 commit tran aTransaccionNovedad end else begin set @Retorno = 1 rollback tran aTransaccionNovedad end