CREATE PROCEDURE SpActualizalRegistroAnalisis @empresa int,@fecha datetime,@valor float,@tipo varchar(50),@numero varchar(50),@analisis varchar(10),@usuario varchar(50),@Retorno int output  AS begin tran lRegistroAnalisis update lRegistroAnalisis set fecha = @fecha,valor = @valor,usuario = @usuario where analisis = @analisis and empresa = @empresa and numero = @numero and tipo = @tipo if (@@error = 0 ) begin set @Retorno = 0 commit tran lRegistroAnalisis end else begin set @Retorno = 1 rollback tran lRegistroAnalisis end