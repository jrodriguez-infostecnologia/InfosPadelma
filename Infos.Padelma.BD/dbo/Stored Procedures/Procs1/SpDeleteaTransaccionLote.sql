CREATE PROCEDURE SpDeleteaTransaccionLote @empresa int,@tipo varchar(50),@numero varchar(50),@lote char(10),@Retorno int output  AS begin tran aTransaccionLote delete aTransaccionLote where empresa = @empresa and tipo = @tipo and numero = @numero and lote = @lote if (@@error = 0 ) begin set @Retorno = 0 commit tran aTransaccionLote end else begin set @Retorno = 1 rollback tran aTransaccionLote end